{"version":3,"sources":["default.js"],"names":["$","document","on","bindEvent","retrieval","prefs","isAjax","local","window","localStorage","session","sessionStorage","recipelist","recipeinfo","process","obj","fn","extend","getVal","this","val","getRecipeList","keyword","getJSON","word","data","code","html","msg","empty","datalist","newslist","each","index","value","oLi","appendTo","oA","prop","attr","data-no","data-transition","addClass","save2Storage","call","listview","getRecipeDetail","src","arr","push","setItem","join","id","json","res","split","tmp","subsection","_arr","e"],"mappings":"AASAA,EAAEC,UAAUC,GAAG,WAAY,SAAU,WACjCC,UAAUC,aAId,IAAIC,QACAC,QAAQ,EACRC,MAAOC,OAAOC,aACdC,QAASF,OAAOG,eAChBC,WAAYZ,EAAE,SACda,WAAYb,EAAE,UAIdc,QAAW,WACX,GAAIC,KAuEJ,OArEAf,GAAEgB,GAAGC,QACDC,OAAQ,WACJ,MAAOC,MAAKC,SAIpBL,EAAIM,cAAgB,WAChB,GAAIC,GAAUtB,EAAE,WAAWkB,QAC3BlB,GAAEuB,QAAQ,iFAAkFC,KAAOF,GAAU,SAASG,GAClH,GAAgB,OAAbA,EAAKC,KAEJ,WADArB,OAAMO,WAAWe,KAAKF,EAAKG,IAG/BvB,OAAMO,WAAWiB,OACjB,IAAIC,GAAWL,EAAKM,QACpB/B,GAAEgC,KAAKF,EAAU,SAASG,EAAOC,GAC7B,GAAIC,GAAMnC,EAAE,QAAQoC,SAAS/B,MAAMO,YAC/ByB,EAAKrC,EAAE,OAAOsC,KAAK,OAAQ,WAAWC,MAAMC,UAAWV,EAASG,GAAW,GAC3EQ,kBAAmB,UAAUL,SAASD,EAC1CnC,GAAE,QAAQ2B,KAAKG,EAASG,GAAgB,SAAGG,SAASC,GACpDrC,EAAE,OAAO2B,KAAKG,EAASG,GAAe,QAAGG,SAASC,GAClDrC,EAAE,OAAO2B,KAAKG,EAASG,GAAkB,WAAGS,SAAS,eAAeN,SAASC,GAE7EvB,QAAQ6B,aAAaC,KAAKV,EAAU,GAAEA,KAE1C7B,MAAMO,WAAWiC,SAAS,WAC1B7C,EAAE,cAAcE,GAAG,MAAO,WACtBY,QAAQgC,gBAAgBF,KAAKzB,WAIzCJ,EAAI4B,aAAe,SAASI,GACxB,GAAIC,KACJhD,GAAEgC,KAAKe,EAAK,SAASd,EAAOC,GACxBc,EAAIC,KAAKhB,EAAM,IAAIC,KAGvB7B,MAAMK,QAAQwC,QAAQ/B,KAAM6B,EAAIG,KAAK,OAGzCpC,EAAI+B,gBAAkB,WAClB,GAAIM,GAAKpD,EAAEmB,MAAMoB,KAAK,WAClBc,KACAC,EAAMjD,MAAMK,QAAQ0C,GACpB3B,EAAO6B,EAAIC,MAAM,IACrBvD,GAAEgC,KAAKP,EAAM,SAASQ,EAAOC,GACzB,GAAIsB,GAAMtB,EAAMqB,MAAM,IACtBF,GAAKG,EAAI,IAAMA,EAAI,KAEvBnD,MAAMQ,WAAWgB,QACjB7B,EAAE,cAAc2B,KAAK0B,EAAc,SACnCrD,EAAE,QAAQ2B,KAAK,iBAAiBb,QAAQ2C,WAAWJ,EAAe,WAAIjB,SAAS/B,MAAMQ,YACrFb,EAAE,QAAQ2B,KAAK,iBAAiBb,QAAQ2C,WAAWJ,EAAe,WAAIjB,SAAS/B,MAAMQ,YACrFb,EAAE,QAAQ2B,KAAK,iBAAiBb,QAAQ2C,WAAWJ,EAAY,QAAIjB,SAAS/B,MAAMQ,YAClFb,EAAE,QAAQ2B,KAAK,mBAAmB0B,EAAY,MAAE,QAAQjB,SAAS/B,MAAMQ,YACvEb,EAAE,QAAQ2B,KAAK,oBAAoB0B,EAAa,OAAE,QAAQjB,SAAS/B,MAAMQ,aAK7EE,EAAI0C,WAAa,SAASV,GACtB,GAAIW,MACAF,EAAMT,EAAIQ,MAAM,IAIpB,OAHAvD,GAAEgC,KAAKwB,EAAK,SAASvB,EAAOC,GACxBwB,EAAKT,KAAK,MAAMf,EAAM,UAEnBwB,EAAKP,KAAK,KAGdpC,KAGPZ,UAAY,WACZ,GAAIY,KAQJ,OAPAA,GAAIX,UAAY,WACZJ,EAAE,cAAcE,GAAG,MAAO,SAASyD,GAC/B7C,QAAQO,mBAKTN","file":"default.js","sourcesContent":["/* \n* @Author: darkless\n* @Date:   2016-03-30 17:52:09\n* @Last Modified by:   darkless\n* @Last Modified time: 2016-04-01 00:28:14\n*/\n\n\n\n$(document).on('pageinit', '#index', function(){\n    bindEvent.retrieval(); \n})\n\n//参数\nvar prefs = {\n    isAjax: false,\n    local: window.localStorage,\n    session: window.sessionStorage,\n    recipelist: $('#book'),\n    recipeinfo: $('#info')\n};\n\n//处理函数\nvar process = (function(){\n    var obj = {};\n\n    $.fn.extend({\n        getVal: function(){\n            return this.val();\n        }\n    })\n\n    obj.getRecipeList = function(){\n        var keyword = $('#recipe').getVal();\n        $.getJSON('http://api.huceo.com/txapi/caipu/?key=721d38ca8ac658cd2cac2ae4b0131977&num=10', {'word':keyword}, function(data){\n            if(data.code != '200'){\n                prefs.recipelist.html(data.msg);\n                return;\n            }\n            prefs.recipelist.empty();\n            var datalist = data.newslist;\n            $.each(datalist, function(index, value){\n                var oLi = $('<li>').appendTo(prefs.recipelist);\n                var oA = $('<a>').prop('href', '#detail').attr({'data-no': datalist[index]['id'],\n                    'data-transition': 'slide'}).appendTo(oLi);\n                $('<h2>').html(datalist[index]['cp_name']).appendTo(oA);\n                $('<p>').html(datalist[index]['texing']).appendTo(oA);\n                $('<p>').html(datalist[index]['type_name']).addClass('ui-li-aside').appendTo(oA);\n\n                process.save2Storage.call(value['id'],value);\n            })\n            prefs.recipelist.listview(\"refresh\");\n            $('#book>li a').on('tap', function(){\n                process.getRecipeDetail.call(this);\n            });\n        })\n    }\n    obj.save2Storage = function(src){\n        var arr = [];\n        $.each(src, function(index, value){\n            arr.push(index+':'+value);\n        })\n\n        prefs.session.setItem(this, arr.join('@'));\n    }\n\n    obj.getRecipeDetail = function(){\n        var id = $(this).attr('data-no');\n        var json = {};\n        var res = prefs.session[id];\n        var data = res.split('@');\n        $.each(data, function(index, value){\n            var tmp = value.split(':');\n            json[tmp[0]] = tmp[1];\n        })\n        prefs.recipeinfo.empty();\n        $('#infoTitle').html(json['cp_name']);\n        $('<li>').html('<h2>食材用料:</h2>'+process.subsection(json['yuanliao'])).appendTo(prefs.recipeinfo);\n        $('<li>').html('<h2>食材调味:</h2>'+process.subsection(json['tiaoliao'])).appendTo(prefs.recipeinfo);\n        $('<li>').html('<h2>食谱做法:</h2>'+process.subsection(json['zuofa'])).appendTo(prefs.recipeinfo);\n        $('<li>').html('<h2>小贴士:</h2><p>'+json['tishi']+'</p>').appendTo(prefs.recipeinfo);\n        $('<li>').html('<h2>菜肴特色:</h2><p>'+json['texing']+'</p>').appendTo(prefs.recipeinfo);\n\n        // $.mobile.changePage('#detail');\n    }\n\n    obj.subsection = function(src){\n        var _arr = [];\n        var tmp = src.split('；');\n        $.each(tmp, function(index, value){\n            _arr.push('<p>'+value+'</p>');\n        })\n        return _arr.join('');\n    }\n\n    return obj;\n}());\n\nvar bindEvent = (function(){\n    var obj = {};\n    obj.retrieval = function(){\n        $('#searchBtn').on('tap', function(e){\n            process.getRecipeList();\n        });\n    }\n\n\n    return obj;\n})();"],"sourceRoot":"/source/"}